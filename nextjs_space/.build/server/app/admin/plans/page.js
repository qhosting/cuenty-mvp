(()=>{var e={};e.id=366,e.ids=[366],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},76206:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(27979),t(12598),t(35866);var r=t(23191),a=t(88716),l=t(37922),i=t.n(l),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["admin",{children:["plans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,27979)),"/home/ubuntu/cuenty_mvp/nextjs_space/app/admin/plans/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,12598)),"/home/ubuntu/cuenty_mvp/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/cuenty_mvp/nextjs_space/app/admin/plans/page.tsx"],u="/admin/plans/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/plans/page",pathname:"/admin/plans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},62760:(e,s,t)=>{Promise.resolve().then(t.bind(t,59292))},59292:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var r=t(10326),a=t(17577),l=t(16856),i=t(83855),n=t(88307),o=t(41137),c=t(28916),d=t(37358),u=t(71821),x=t(85206),m=t(98091),p=t(80577),h=t(82355),b=t(40381);function v(){let[e,s]=(0,a.useState)([]),[t,v]=(0,a.useState)([]),[j,y]=(0,a.useState)(!0),[g,N]=(0,a.useState)(""),[w,_]=(0,a.useState)(""),[P,k]=(0,a.useState)(!1),[C,q]=(0,a.useState)(null),[Z,E]=(0,a.useState)(null),S=async()=>{try{y(!0);let[e,t]=await Promise.all([h.MP.getPlans(),h.MP.getServices()]);e.success?s(e.data):s([{id:"1",servicio_id:"1",servicio_nombre:"Netflix",nombre:"Plan Premium",duracion_meses:1,precio:15990,slots_disponibles:4,activo:!0,created_at:"2024-01-15T10:30:00Z"},{id:"2",servicio_id:"1",servicio_nombre:"Netflix",nombre:"Plan Premium - 3 meses",duracion_meses:3,precio:42990,slots_disponibles:4,activo:!0,created_at:"2024-01-14T09:15:00Z"},{id:"3",servicio_id:"2",servicio_nombre:"Disney+",nombre:"Plan Familiar",duracion_meses:1,precio:12990,slots_disponibles:7,activo:!0,created_at:"2024-01-13T14:45:00Z"}]),t.success?v(t.data):v([{id:"1",nombre:"Netflix"},{id:"2",nombre:"Disney+"},{id:"3",nombre:"HBO Max"}])}catch(e){b.Am.error("Error de conexi\xf3n")}finally{y(!1)}},M=async t=>{try{let r=await h.MP.deletePlan(t);r.success?(s(e.filter(e=>e.id!==t)),b.Am.success("Plan eliminado correctamente")):b.Am.error(r.message||"Error al eliminar plan")}catch(e){b.Am.error("Error de conexi\xf3n")}finally{E(null)}},A=e.filter(e=>{let s=e.nombre.toLowerCase().includes(g.toLowerCase())||(e.servicio_nombre||"").toLowerCase().includes(g.toLowerCase()),t=!w||e.servicio_id===w;return s&&t});return(0,r.jsxs)(p.l,{currentPath:"/admin/plans",children:[(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gesti\xf3n de Planes"}),r.jsx("p",{className:"text-slate-400",children:"Administra los planes de suscripci\xf3n de cada servicio"})]}),(0,r.jsxs)(l.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{q(null),k(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 flex items-center space-x-2",children:[r.jsx(i.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Nuevo Plan"})]})]}),r.jsx("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-2xl p-6 border border-slate-700",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar planes...",value:g,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),(0,r.jsxs)("div",{className:"relative md:w-64",children:[r.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,r.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",children:[r.jsx("option",{value:"",children:"Todos los servicios"}),t.map(e=>r.jsx("option",{value:e.id,children:e.nombre},e.id))]})]})]})}),r.jsx("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-2xl border border-slate-700 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-slate-700/50 border-b border-slate-600",children:[r.jsx("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Plan"}),r.jsx("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Servicio"}),r.jsx("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Duraci\xf3n"}),r.jsx("th",{className:"text-right py-4 px-6 text-slate-300 font-medium",children:"Precio"}),r.jsx("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Slots"}),r.jsx("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Estado"}),r.jsx("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Acciones"})]})}),r.jsx("tbody",{children:A.map((e,s)=>(0,r.jsxs)(l.E.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"border-b border-slate-700 hover:bg-slate-700/30 transition-colors",children:[r.jsx("td",{className:"py-4 px-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-lg",children:r.jsx(c.Z,{className:"w-5 h-5 text-blue-400"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-white font-medium",children:e.nombre}),(0,r.jsxs)("p",{className:"text-slate-400 text-sm",children:["ID: ",e.id]})]})]})}),r.jsx("td",{className:"py-4 px-6",children:r.jsx("span",{className:"text-white",children:e.servicio_nombre||"N/A"})}),r.jsx("td",{className:"py-4 px-6 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1 text-slate-300",children:[r.jsx(d.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[e.duracion_meses," ",1===e.duracion_meses?"mes":"meses"]})]})}),r.jsx("td",{className:"py-4 px-6 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1 text-green-400 font-medium",children:[r.jsx(u.Z,{className:"w-4 h-4"}),r.jsx("span",{children:e.precio.toLocaleString("es-CL")})]})}),r.jsx("td",{className:"py-4 px-6 text-center",children:(0,r.jsxs)("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-sm",children:[e.slots_disponibles," slots"]})}),r.jsx("td",{className:"py-4 px-6 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${e.activo?"bg-green-400":"bg-red-400"}`}),r.jsx("span",{className:`ml-2 text-sm ${e.activo?"text-green-400":"text-red-400"}`,children:e.activo?"Activo":"Inactivo"})]})}),r.jsx("td",{className:"py-4 px-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>{q(e),k(!0)},className:"p-2 text-slate-400 hover:text-blue-400 transition-colors",title:"Editar",children:r.jsx(x.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>E(e.id),className:"p-2 text-slate-400 hover:text-red-400 transition-colors",title:"Eliminar",children:r.jsx(m.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),0===A.length&&!j&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(c.Z,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:g||w?"No se encontraron planes":"No hay planes registrados"}),r.jsx("p",{className:"text-slate-500 mb-6",children:g||w?"Intenta con otros filtros de b\xfasqueda":"Comienza agregando tu primer plan de suscripci\xf3n"}),!g&&!w&&r.jsx("button",{onClick:()=>{q(null),k(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"Crear Primer Plan"})]}),j&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-slate-400",children:"Cargando planes..."})]})]}),Z&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 max-w-md w-full",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Confirmar Eliminaci\xf3n"}),r.jsx("p",{className:"text-slate-400 mb-6",children:"\xbfEst\xe1s seguro de que deseas eliminar este plan? Esta acci\xf3n no se puede deshacer."}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>E(null),className:"flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",children:"Cancelar"}),r.jsx("button",{onClick:()=>M(Z),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Eliminar"})]})]})}),P&&r.jsx(f,{plan:C,services:t,onClose:()=>k(!1),onSuccess:S})]})}function f({plan:e,services:s,onClose:t,onSuccess:i}){let[n,o]=(0,a.useState)({servicio_id:e?.servicio_id||"",nombre:e?.nombre||"",duracion_meses:e?.duracion_meses||1,precio:e?.precio||0,slots_disponibles:e?.slots_disponibles||1,activo:e?.activo??!0}),[c,d]=(0,a.useState)(!1),u=async s=>{if(s.preventDefault(),!n.servicio_id||!n.nombre||n.precio<=0){b.Am.error("Por favor completa todos los campos requeridos");return}d(!0);try{let s=e?await h.MP.updatePlan(e.id,n):await h.MP.createPlan(n);s.success?(b.Am.success(`Plan ${e?"actualizado":"creado"} correctamente`),i(),t()):b.Am.error(s.message||`Error al ${e?"actualizar":"crear"} plan`)}catch(e){b.Am.error("Error de conexi\xf3n")}finally{d(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 max-w-lg w-full",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:e?"Editar Plan":"Nuevo Plan"}),(0,r.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Servicio *"}),(0,r.jsxs)("select",{value:n.servicio_id,onChange:e=>o({...n,servicio_id:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Seleccionar servicio"}),s.map(e=>r.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Duraci\xf3n (meses) *"}),r.jsx("input",{type:"number",min:"1",max:"12",value:n.duracion_meses,onChange:e=>o({...n,duracion_meses:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nombre del Plan *"}),r.jsx("input",{type:"text",value:n.nombre,onChange:e=>o({...n,nombre:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500",placeholder:"Ej: Plan Premium",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Precio (CLP) *"}),r.jsx("input",{type:"number",min:"0",step:"100",value:n.precio,onChange:e=>o({...n,precio:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slots Disponibles *"}),r.jsx("input",{type:"number",min:"1",max:"10",value:n.slots_disponibles,onChange:e=>o({...n,slots_disponibles:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:n.activo,onChange:e=>o({...n,activo:e.target.checked}),className:"w-4 h-4 text-blue-600 bg-slate-900 border-slate-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-slate-300",children:"Plan activo"})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",disabled:c,children:"Cancelar"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors disabled:opacity-50",disabled:c,children:c?"Guardando...":e?"Actualizar":"Crear"})]})]})]})})}},37358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71821:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},41137:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},85206:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},83855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},98091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},27979:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/home/ubuntu/cuenty_mvp/nextjs_space/app/admin/plans/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,17,928,765,554,869],()=>t(76206));module.exports=r})();