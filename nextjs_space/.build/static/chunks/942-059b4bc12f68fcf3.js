"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{20942:function(e,a,s){s.d(a,{l:function(){return N}});var t=s(57437),r=s(2265),n=s(99376),i=s(27648),c=s(33145),l=s(5095),o=s(60429),d=s(25466),u=s(44794),m=s(88226),v=s(42449),p=s(95805),h=s(98728),g=s(32489),x=s(47692),f=s(58293),y=s(94766),b=s(39740),w=s(69064);let j=[{name:"Dashboard",href:"/admin",icon:d.Z},{name:"Servicios",href:"/admin/services",icon:u.Z},{name:"Planes",href:"/admin/plans",icon:m.Z},{name:"Pedidos",href:"/admin/orders",icon:v.Z},{name:"Cuentas",href:"/admin/accounts",icon:p.Z},{name:"Configuraci\xf3n",href:"/admin/config",icon:h.Z}];function N(e){let{children:a,currentPath:s}=e,[d,u]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),N=(0,n.useRouter)();return((0,r.useEffect)(()=>{if(v(!0),!b.CZ.isAuthenticated()){N.push("/admin/login");return}(async()=>{try{let e=await fetch("/api/version");if(e.ok){let a=await e.json();h(a.version)}}catch(e){console.error("Error al obtener versi\xf3n de API:",e)}})()},[N]),m)?b.CZ.isAuthenticated()?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,t.jsx)(l.M,{children:d&&(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 lg:hidden",onClick:()=>u(!1)})}),(0,t.jsx)(o.E.div,{initial:!1,animate:{x:d?0:-320},className:"fixed inset-y-0 left-0 z-50 w-80 bg-slate-900/90 backdrop-blur-xl border-r border-slate-700 lg:translate-x-0 lg:static lg:inset-0",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-6 border-b border-slate-700",children:[(0,t.jsx)(i.default,{href:"/",className:"flex items-center space-x-3",children:(0,t.jsx)("div",{className:"relative w-32 h-8",children:(0,t.jsx)(c.default,{src:"/images/CUENTY.png",alt:"CUENTY",fill:!0,className:"object-contain",priority:!0})})}),(0,t.jsx)("button",{onClick:()=>u(!1),className:"lg:hidden p-2 text-slate-400 hover:text-white",children:(0,t.jsx)(g.Z,{className:"w-6 h-6"})})]}),(0,t.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:[(0,t.jsx)("p",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Panel de Administraci\xf3n"}),j.map(e=>{let a=s===e.href;return(0,t.jsxs)(i.default,{href:e.href,className:"flex items-center space-x-3 px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ".concat(a?"bg-gradient-to-r from-blue-500/20 to-purple-600/20 text-white border border-blue-500/30":"text-slate-300 hover:text-white hover:bg-slate-800/50"),onClick:()=>u(!1),children:[(0,t.jsx)(e.icon,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:e.name})]},e.name)})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-slate-700 space-y-3",children:[(0,t.jsxs)("button",{onClick:()=>{w.Am.success("Sesi\xf3n cerrada correctamente"),b.CZ.logout()},className:"flex items-center space-x-3 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-xl transition-all duration-200 w-full",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Cerrar Sesi\xf3n"})]}),p&&(0,t.jsx)("div",{className:"flex items-center justify-center px-4 py-2 text-xs text-slate-500 bg-slate-800/30 rounded-lg border border-slate-700/50",children:(0,t.jsxs)("span",{className:"font-mono",children:["API v",p]})})]})]})}),(0,t.jsxs)("div",{className:"lg:pl-80",children:[(0,t.jsx)("div",{className:"sticky top-0 z-40 bg-slate-900/80 backdrop-blur-xl border-b border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,t.jsx)("button",{onClick:()=>u(!0),className:"lg:hidden p-2 text-slate-400 hover:text-white",children:(0,t.jsx)(f.Z,{className:"w-6 h-6"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-white lg:ml-0 ml-2",children:"Panel de Administraci\xf3n"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("button",{className:"relative p-2 text-slate-400 hover:text-white",children:[(0,t.jsx)(y.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:"3"})]}),(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:"A"})]})]})}),(0,t.jsx)("main",{className:"p-6",children:a})]})]}):null:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white",children:"Cargando..."})})}},39740:function(e,a,s){s.d(a,{CZ:function(){return r},MP:function(){return n}});let t=s(83464).Z.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{{let a=localStorage.getItem("admin_token");a&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,e=>{var a;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&(localStorage.removeItem("admin_token"),window.location.href="/admin/login"),Promise.reject(e)});let r={login:async(e,a)=>{try{let s=await t.post("/api/admin/login",{email:e,password:a});if(s.data.token)return localStorage.setItem("admin_token",s.data.token),{success:!0,token:s.data.token};return{success:!1,message:"No token received"}}catch(e){var s,r;return{success:!1,message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Error de autenticaci\xf3n"}}},logout:()=>{localStorage.removeItem("admin_token"),window.location.href="/admin/login"},isAuthenticated:()=>!!localStorage.getItem("admin_token"),getProfile:async()=>{try{let e=await t.get("/api/admin/profile");return{success:!0,data:e.data}}catch(s){var e,a;return{success:!1,message:(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Error al obtener perfil"}}}},n={getDashboard:async()=>{try{let e=await t.get("/api/admin/dashboard");return{success:!0,data:e.data}}catch(s){var e,a;return{success:!1,message:(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Error al obtener estad\xedsticas"}}},getServices:async()=>{try{let e=await t.get("/api/admin/services");return{success:!0,data:e.data}}catch(s){var e,a;return{success:!1,message:(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Error al obtener servicios"}}},createService:async e=>{try{let a=await t.post("/api/admin/services",e);return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al crear servicio"}}},updateService:async(e,a)=>{try{let s=await t.put("/api/admin/services/".concat(e),a);return{success:!0,data:s.data}}catch(e){var s,r;return{success:!1,message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Error al actualizar servicio"}}},deleteService:async e=>{try{return await t.delete("/api/admin/services/".concat(e)),{success:!0}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al eliminar servicio"}}},getPlans:async()=>{try{let e=await t.get("/api/admin/plans");return{success:!0,data:e.data}}catch(s){var e,a;return{success:!1,message:(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Error al obtener planes"}}},createPlan:async e=>{try{let a=await t.post("/api/admin/plans",e);return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al crear plan"}}},updatePlan:async(e,a)=>{try{let s=await t.put("/api/admin/plans/".concat(e),a);return{success:!0,data:s.data}}catch(e){var s,r;return{success:!1,message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Error al actualizar plan"}}},deletePlan:async e=>{try{return await t.delete("/api/admin/plans/".concat(e)),{success:!0}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al eliminar plan"}}},getOrders:async e=>{try{let a=await t.get("/api/admin/orders",{params:e});return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al obtener \xf3rdenes"}}},getOrder:async e=>{try{let a=await t.get("/api/admin/orders/".concat(e));return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al obtener orden"}}},updateOrderStatus:async(e,a)=>{try{let s=await t.put("/api/admin/orders/".concat(e,"/status"),{status:a});return{success:!0,data:s.data}}catch(e){var s,r;return{success:!1,message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Error al actualizar estado"}}},getAccounts:async e=>{try{let a=await t.get("/api/admin/accounts",{params:e});return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al obtener cuentas"}}},createAccount:async e=>{try{let a=await t.post("/api/admin/accounts",e);return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al crear cuenta"}}},updateAccount:async(e,a)=>{try{let s=await t.put("/api/admin/accounts/".concat(e),a);return{success:!0,data:s.data}}catch(e){var s,r;return{success:!1,message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Error al actualizar cuenta"}}},deleteAccount:async e=>{try{return await t.delete("/api/admin/accounts/".concat(e)),{success:!0}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al eliminar cuenta"}}},getEvolutionConfig:async()=>{try{let e=await t.get("/api/admin/config/evolution");return{success:!0,data:e.data}}catch(s){var e,a;return{success:!1,message:(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Error al obtener configuraci\xf3n"}}},saveEvolutionConfig:async e=>{try{let a=await t.post("/api/admin/config/evolution",e);return{success:!0,data:a.data}}catch(e){var a,s;return{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Error al guardar configuraci\xf3n"}}}}}}]);