(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{59635:function(e,s,t){Promise.resolve().then(t.bind(t,71720))},71720:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(57437),r=t(2265),l=t(80605),n=t(99376),d=t(44794),i=t(88906),c=t(31047),o=t(91723),x=t(76858),m=t(92369),u=t(98728),h=t(27648),b=t(34262),p=t(45463),g=t(94508);function N(){var e,s,t,N,j;let f=(0,l.useSession)()||{},v=f.data||null,w=f.status||"loading",y=(0,n.useRouter)(),[k,D]=(0,r.useState)([]),[E,C]=(0,r.useState)({totalOrders:0,activeSubscriptions:0,totalSpent:0}),[P,S]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if("loading"!==w){if(!v){y.push("/auth/login");return}Z()}},[v,w,y]);let Z=async()=>{try{let e=await fetch("/api/orders");if(e.ok){let s=await e.json();D(s.slice(0,5));let t=s.reduce((e,s)=>e+Number(s.totalAmount),0),a=s.filter(e=>"COMPLETED"===e.status||"PAID"===e.status).length,r=s[0];C({totalOrders:s.length,activeSubscriptions:a,totalSpent:t,lastOrderDate:null==r?void 0:r.createdAt})}}catch(e){console.error("Error fetching dashboard data:",e)}finally{S(!1)}},M=e=>{switch(e){case"COMPLETED":return"bg-green-500/20 text-green-400 border-green-500/20";case"PAID":return"bg-blue-500/20 text-blue-400 border-blue-500/20";case"PROCESSING":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/20";case"PENDING":return"bg-orange-500/20 text-orange-400 border-orange-500/20";case"CANCELLED":return"bg-red-500/20 text-red-400 border-red-500/20";default:return"bg-slate-500/20 text-slate-400 border-slate-500/20"}},A=e=>{switch(e){case"COMPLETED":return"Completada";case"PAID":return"Pagada";case"PROCESSING":return"Procesando";case"PENDING":return"Pendiente";case"CANCELLED":return"Cancelada";default:return e}};return"loading"===w||P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Header,{}),(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-24",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,a.jsx)("div",{className:"h-8 bg-slate-700 rounded w-1/4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-32 bg-slate-800/50 rounded-xl"},s))}),(0,a.jsx)("div",{className:"h-64 bg-slate-800/50 rounded-xl"})]})})}),(0,a.jsx)(p.Footer,{})]}):v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Header,{}),(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-24",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-white mb-2",children:["\xa1Hola, ",null===(s=v.user)||void 0===s?void 0:null===(e=s.name)||void 0===e?void 0:e.split(" ")[0],"! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-xl text-slate-300",children:"Gestiona tus suscripciones y \xf3rdenes desde tu panel de control"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 backdrop-blur-sm rounded-xl border border-blue-500/20 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-blue-400"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:E.totalOrders}),(0,a.jsx)("div",{className:"text-sm text-blue-300",children:"Total de \xd3rdenes"})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 backdrop-blur-sm rounded-xl border border-green-500/20 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,a.jsx)(i.Z,{className:"w-6 h-6 text-green-400"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:E.activeSubscriptions}),(0,a.jsx)("div",{className:"text-sm text-green-300",children:"Suscripciones Activas"})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 backdrop-blur-sm rounded-xl border border-purple-500/20 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-purple-400"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,g.T4)(E.totalSpent)}),(0,a.jsx)("div",{className:"text-sm text-purple-300",children:"Total Gastado"})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-cyan-500/20 to-cyan-600/10 backdrop-blur-sm rounded-xl border border-cyan-500/20 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-cyan-400"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:E.lastOrderDate?new Date(E.lastOrderDate).toLocaleDateString("es-MX",{day:"2-digit",month:"short"}):"N/A"}),(0,a.jsx)("div",{className:"text-sm text-cyan-300",children:"\xdaltima Compra"})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-gradient-to-b from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"\xd3rdenes Recientes"}),(0,a.jsx)(h.default,{href:"/dashboard/orders",className:"text-blue-400 hover:text-blue-300 transition-colors font-medium",children:"Ver todas â†’"})]}),0===k.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No tienes \xf3rdenes a\xfan"}),(0,a.jsx)("p",{className:"text-slate-300 mb-4",children:"\xa1Explora nuestro cat\xe1logo y haz tu primera compra!"}),(0,a.jsxs)(h.default,{href:"/catalogo",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors font-medium",children:[(0,a.jsx)("span",{children:"Ver Cat\xe1logo"}),(0,a.jsx)(x.Z,{className:"w-4 h-4"})]})]}):(0,a.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,a.jsx)("div",{className:"bg-slate-900/50 rounded-lg p-4 hover:bg-slate-800/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-white",children:e.product.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:new Date(e.createdAt).toLocaleDateString("es-MX",{day:"2-digit",month:"long",year:"numeric"})})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-white mb-1",children:(0,g.T4)(Number(e.totalAmount))}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(M(e.status)),children:A(e.status)})]})]})},e.id))})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-b from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Informaci\xf3n de la cuenta"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-slate-400"}),(0,a.jsx)("span",{className:"text-slate-300",children:null===(t=v.user)||void 0===t?void 0:t.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-slate-400"}),(0,a.jsx)("span",{className:"text-slate-300",children:null===(N=v.user)||void 0===N?void 0:N.email})]}),(null===(j=v.user)||void 0===j?void 0:j.phone)&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-slate-400"}),(0,a.jsx)("span",{className:"text-slate-300",children:v.user.phone})]})]}),(0,a.jsx)(h.default,{href:"/dashboard/settings",className:"mt-4 w-full bg-slate-700/50 hover:bg-slate-600/50 text-white py-2 px-4 rounded-lg transition-colors text-sm font-medium text-center block",children:"Editar perfil"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-b from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Acciones r\xe1pidas"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(h.default,{href:"/catalogo",className:"flex items-center justify-between w-full bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 text-white py-3 px-4 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"font-medium",children:"Explorar Cat\xe1logo"}),(0,a.jsx)(x.Z,{className:"w-4 h-4"})]}),(0,a.jsxs)(h.default,{href:"/dashboard/orders",className:"flex items-center justify-between w-full bg-slate-700/50 hover:bg-slate-600/50 text-white py-3 px-4 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"font-medium",children:"Ver Mis \xd3rdenes"}),(0,a.jsx)(x.Z,{className:"w-4 h-4"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=encodeURIComponent("\xa1Hola! Tengo una consulta sobre mi cuenta en CUENTY. \xbfPodr\xedan ayudarme? \uD83D\uDE0A");window.open("https://wa.me/message/IOR2WUU66JVMM1?text=".concat(e),"_blank")},className:"flex items-center justify-between w-full bg-green-500/20 hover:bg-green-500/30 text-white py-3 px-4 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"font-medium",children:"Contactar Soporte"}),(0,a.jsx)(x.Z,{className:"w-4 h-4"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-b from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\uD83D\uDCA1 Tips"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"text-slate-300",children:[(0,a.jsx)("strong",{className:"text-white",children:"Entrega r\xe1pida:"})," Las credenciales se env\xedan por WhatsApp inmediatamente"]}),(0,a.jsxs)("div",{className:"text-slate-300",children:[(0,a.jsx)("strong",{className:"text-white",children:"Soporte 24/7:"})," Estamos disponibles para ayudarte cuando lo necesites"]}),(0,a.jsxs)("div",{className:"text-slate-300",children:[(0,a.jsx)("strong",{className:"text-white",children:"Garant\xeda:"})," Si algo no funciona, te devolvemos tu dinero"]})]})]})]})]})]})}),(0,a.jsx)(p.Footer,{})]}):null}},94508:function(e,s,t){"use strict";function a(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e)}function r(e){return 30===e?"1 Mes":90===e?"3 Meses":180===e?"6 Meses":365===e?"1 A\xf1o":"".concat(e," d\xedas")}t.d(s,{LU:function(){return r},T4:function(){return a}})},76858:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},44794:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},88906:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},99376:function(e,s,t){"use strict";var a=t(35475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[399,605,801,971,117,744],function(){return e(e.s=59635)}),_N_E=e.O()}]);