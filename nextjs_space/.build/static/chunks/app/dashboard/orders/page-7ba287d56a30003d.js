(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{70430:function(e,t,s){Promise.resolve().then(s.bind(s,68566))},68566:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(57437),r=s(2265),l=s(80605),n=s(99376),o=s(32660),c=s(73247),i=s(44794),d=s(90740),u=s(31047),x=s(91723),m=s(95252),h=s(27648),p=s(34262),b=s(45463),f=s(94508);function g(){let e=(0,l.useSession)()||{},t=e.data||null,s=e.status||"loading",g=(0,n.useRouter)(),[N,j]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[w,C]=(0,r.useState)(!0),[k,P]=(0,r.useState)({status:"all",search:""});(0,r.useEffect)(()=>{if("loading"!==s){if(!t){g.push("/auth/login");return}E()}},[t,s,g]),(0,r.useEffect)(()=>{M()},[N,k]);let E=async()=>{try{let e=await fetch("/api/orders");if(e.ok){let t=await e.json();j(t)}}catch(e){console.error("Error fetching orders:",e)}finally{C(!1)}},M=()=>{let e=N;"all"!==k.status&&(e=e.filter(e=>e.status===k.status)),k.search&&(e=e.filter(e=>e.product.name.toLowerCase().includes(k.search.toLowerCase())||e.id.toLowerCase().includes(k.search.toLowerCase()))),y(e)},D=e=>{switch(e){case"COMPLETED":return"bg-green-500/20 text-green-400 border-green-500/30";case"PAID":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"PROCESSING":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"PENDING":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"CANCELLED":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}},Z=e=>{switch(e){case"COMPLETED":return"Completada";case"PAID":return"Pagada";case"PROCESSING":return"Procesando";case"PENDING":return"Pendiente";case"CANCELLED":return"Cancelada";default:return e}};return"loading"===s||w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Header,{}),(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-24",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,a.jsx)("div",{className:"h-8 bg-slate-700 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-16 bg-slate-800/50 rounded-xl"}),(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-24 bg-slate-800/50 rounded-xl"},t))})]})})}),(0,a.jsx)(b.Footer,{})]}):t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Header,{}),(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-24",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(h.default,{href:"/dashboard",className:"flex items-center space-x-2 text-slate-300 hover:text-white transition-colors mb-4",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Volver al Dashboard"})]}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Mis \xd3rdenes"}),(0,a.jsx)("p",{className:"text-xl text-slate-300",children:"Consulta el historial y estado de todas tus compras"})]}),(0,a.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl border border-slate-700 p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por producto o ID de orden...",value:k.search,onChange:e=>P(t=>({...t,search:e.target.value})),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-blue-500 focus:outline-none"})]})}),(0,a.jsx)("div",{className:"lg:w-64",children:(0,a.jsx)("select",{value:k.status,onChange:e=>P(t=>({...t,status:e.target.value})),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:border-blue-500 focus:outline-none",children:[{value:"all",label:"Todos los estados"},{value:"PENDING",label:"Pendientes"},{value:"PAID",label:"Pagadas"},{value:"PROCESSING",label:"Procesando"},{value:"COMPLETED",label:"Completadas"},{value:"CANCELLED",label:"Canceladas"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})})]})}),(0,a.jsxs)("div",{className:"bg-gradient-to-b from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-white",children:[v.length," ",1===v.length?"orden":"\xf3rdenes"]}),N.length>0&&(0,a.jsxs)("div",{className:"text-slate-300 text-sm",children:["Total gastado: ",(0,a.jsx)("span",{className:"font-semibold text-white",children:(0,f.T4)(N.reduce((e,t)=>e+Number(t.totalAmount),0))})]})]}),0===v.length?(0,a.jsx)("div",{className:"text-center py-16",children:0===N.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No tienes \xf3rdenes a\xfan"}),(0,a.jsx)("p",{className:"text-slate-300 mb-6",children:"\xa1Explora nuestro cat\xe1logo y haz tu primera compra!"}),(0,a.jsxs)(h.default,{href:"/catalogo",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors font-medium",children:[(0,a.jsx)("span",{children:"Ver Cat\xe1logo"}),(0,a.jsx)(i.Z,{className:"w-4 h-4"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No se encontraron resultados"}),(0,a.jsx)("p",{className:"text-slate-300 mb-6",children:"Intenta cambiar los filtros de b\xfasqueda"}),(0,a.jsx)("button",{onClick:()=>P({status:"all",search:""}),className:"bg-slate-700 hover:bg-slate-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Limpiar filtros"})]})}):(0,a.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,a.jsx)("div",{className:"bg-slate-900/50 rounded-lg border border-slate-700/50 hover:border-slate-600 transition-all duration-200 overflow-hidden",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-1",children:e.product.name}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm",children:["ID: ",e.id.slice(-8).toUpperCase()]})]}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium border ".concat(D(e.status)),children:Z(e.status)})]}),(0,a.jsx)("p",{className:"text-slate-300 text-sm mb-3",children:e.product.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("es-MX",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(0,f.LU)(e.product.duration)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"bank_transfer"===e.paymentMethod?"Transferencia":"Otro"})]})]})]}),(0,a.jsxs)("div",{className:"lg:text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white mb-3",children:(0,f.T4)(Number(e.totalAmount))}),(0,a.jsxs)("div",{className:"flex lg:justify-end gap-2",children:["PENDING"===e.status&&(0,a.jsx)("button",{onClick:()=>g.push("/checkout?product=".concat(e.product.id)),className:"bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 px-4 py-2 rounded-lg transition-colors text-sm font-medium",children:"Completar Pago"}),("COMPLETED"===e.status||"PAID"===e.status)&&(0,a.jsx)("button",{onClick:()=>{let t=encodeURIComponent("Hola, necesito las credenciales de mi orden ".concat(e.id.slice(-8).toUpperCase(),": ").concat(e.product.name));window.open("https://wa.me/message/IOR2WUU66JVMM1?text=".concat(t),"_blank")},className:"bg-green-500/20 hover:bg-green-500/30 text-green-400 px-4 py-2 rounded-lg transition-colors text-sm font-medium",children:"Ver Credenciales"}),(0,a.jsx)("button",{onClick:()=>{let t=encodeURIComponent("Hola, tengo una consulta sobre mi orden ".concat(e.id.slice(-8).toUpperCase()));window.open("https://wa.me/message/IOR2WUU66JVMM1?text=".concat(t),"_blank")},className:"bg-slate-700/50 hover:bg-slate-600/50 text-slate-300 hover:text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium",children:"Soporte"})]})]})]})})},e.id))})]})]})}),(0,a.jsx)(b.Footer,{})]}):null}},94508:function(e,t,s){"use strict";function a(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e)}function r(e){return 30===e?"1 Mes":90===e?"3 Meses":180===e?"6 Meses":365===e?"1 A\xf1o":"".concat(e," d\xedas")}s.d(t,{LU:function(){return r},T4:function(){return a}})},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},95252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},44794:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},73247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},99376:function(e,t,s){"use strict";var a=s(35475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[399,605,801,971,117,744],function(){return e(e.s=70430)}),_N_E=e.O()}]);