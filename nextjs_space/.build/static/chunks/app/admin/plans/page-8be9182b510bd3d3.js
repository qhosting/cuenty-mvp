(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{26504:function(e,s,t){Promise.resolve().then(t.bind(t,71476))},71476:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var l=t(57437),a=t(2265),r=t(60429),i=t(99397),n=t(73247),c=t(90740),o=t(88226),d=t(31047),u=t(95252),x=t(88893),m=t(18930),p=t(20942),h=t(39740),b=t(69064);function f(){let[e,s]=(0,a.useState)([]),[t,f]=(0,a.useState)([]),[j,y]=(0,a.useState)(!0),[N,g]=(0,a.useState)(""),[w,k]=(0,a.useState)(""),[_,P]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(null),[E,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{M()},[]);let M=async()=>{try{y(!0);let[e,t]=await Promise.all([h.MP.getPlans(),h.MP.getServices()]);e.success?s(e.data):s([{id:"1",servicio_id:"1",servicio_nombre:"Netflix",nombre:"Plan Premium",duracion_meses:1,precio:15990,slots_disponibles:4,activo:!0,created_at:"2024-01-15T10:30:00Z"},{id:"2",servicio_id:"1",servicio_nombre:"Netflix",nombre:"Plan Premium - 3 meses",duracion_meses:3,precio:42990,slots_disponibles:4,activo:!0,created_at:"2024-01-14T09:15:00Z"},{id:"3",servicio_id:"2",servicio_nombre:"Disney+",nombre:"Plan Familiar",duracion_meses:1,precio:12990,slots_disponibles:7,activo:!0,created_at:"2024-01-13T14:45:00Z"}]),t.success?f(t.data):f([{id:"1",nombre:"Netflix"},{id:"2",nombre:"Disney+"},{id:"3",nombre:"HBO Max"}])}catch(e){b.Am.error("Error de conexi\xf3n")}finally{y(!1)}},A=async t=>{try{let l=await h.MP.deletePlan(t);l.success?(s(e.filter(e=>e.id!==t)),b.Am.success("Plan eliminado correctamente")):b.Am.error(l.message||"Error al eliminar plan")}catch(e){b.Am.error("Error de conexi\xf3n")}finally{S(null)}},q=e.filter(e=>{let s=e.nombre.toLowerCase().includes(N.toLowerCase())||(e.servicio_nombre||"").toLowerCase().includes(N.toLowerCase()),t=!w||e.servicio_id===w;return s&&t});return(0,l.jsxs)(p.l,{currentPath:"/admin/plans",children:[(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gesti\xf3n de Planes"}),(0,l.jsx)("p",{className:"text-slate-400",children:"Administra los planes de suscripci\xf3n de cada servicio"})]}),(0,l.jsxs)(r.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Z(null),P(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 flex items-center space-x-2",children:[(0,l.jsx)(i.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Nuevo Plan"})]})]}),(0,l.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-2xl p-6 border border-slate-700",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,l.jsx)("input",{type:"text",placeholder:"Buscar planes...",value:N,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),(0,l.jsxs)("div",{className:"relative md:w-64",children:[(0,l.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,l.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",children:[(0,l.jsx)("option",{value:"",children:"Todos los servicios"}),t.map(e=>(0,l.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]})}),(0,l.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-2xl border border-slate-700 overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-slate-700/50 border-b border-slate-600",children:[(0,l.jsx)("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Plan"}),(0,l.jsx)("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Servicio"}),(0,l.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Duraci\xf3n"}),(0,l.jsx)("th",{className:"text-right py-4 px-6 text-slate-300 font-medium",children:"Precio"}),(0,l.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Slots"}),(0,l.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Estado"}),(0,l.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Acciones"})]})}),(0,l.jsx)("tbody",{children:q.map((e,s)=>(0,l.jsxs)(r.E.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"border-b border-slate-700 hover:bg-slate-700/30 transition-colors",children:[(0,l.jsx)("td",{className:"py-4 px-6",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-lg",children:(0,l.jsx)(o.Z,{className:"w-5 h-5 text-blue-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-white font-medium",children:e.nombre}),(0,l.jsxs)("p",{className:"text-slate-400 text-sm",children:["ID: ",e.id]})]})]})}),(0,l.jsx)("td",{className:"py-4 px-6",children:(0,l.jsx)("span",{className:"text-white",children:e.servicio_nombre||"N/A"})}),(0,l.jsx)("td",{className:"py-4 px-6 text-center",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-1 text-slate-300",children:[(0,l.jsx)(d.Z,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:[e.duracion_meses," ",1===e.duracion_meses?"mes":"meses"]})]})}),(0,l.jsx)("td",{className:"py-4 px-6 text-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-1 text-green-400 font-medium",children:[(0,l.jsx)(u.Z,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:e.precio.toLocaleString("es-CL")})]})}),(0,l.jsx)("td",{className:"py-4 px-6 text-center",children:(0,l.jsxs)("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-sm",children:[e.slots_disponibles," slots"]})}),(0,l.jsx)("td",{className:"py-4 px-6 text-center",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.activo?"bg-green-400":"bg-red-400")}),(0,l.jsx)("span",{className:"ml-2 text-sm ".concat(e.activo?"text-green-400":"text-red-400"),children:e.activo?"Activo":"Inactivo"})]})}),(0,l.jsx)("td",{className:"py-4 px-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>{Z(e),P(!0)},className:"p-2 text-slate-400 hover:text-blue-400 transition-colors",title:"Editar",children:(0,l.jsx)(x.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>S(e.id),className:"p-2 text-slate-400 hover:text-red-400 transition-colors",title:"Eliminar",children:(0,l.jsx)(m.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),0===q.length&&!j&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(o.Z,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:N||w?"No se encontraron planes":"No hay planes registrados"}),(0,l.jsx)("p",{className:"text-slate-500 mb-6",children:N||w?"Intenta con otros filtros de b\xfasqueda":"Comienza agregando tu primer plan de suscripci\xf3n"}),!N&&!w&&(0,l.jsx)("button",{onClick:()=>{Z(null),P(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"Crear Primer Plan"})]}),j&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-400",children:"Cargando planes..."})]})]}),E&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,l.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 max-w-md w-full",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Confirmar Eliminaci\xf3n"}),(0,l.jsx)("p",{className:"text-slate-400 mb-6",children:"\xbfEst\xe1s seguro de que deseas eliminar este plan? Esta acci\xf3n no se puede deshacer."}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",children:"Cancelar"}),(0,l.jsx)("button",{onClick:()=>A(E),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Eliminar"})]})]})}),_&&(0,l.jsx)(v,{plan:C,services:t,onClose:()=>P(!1),onSuccess:M})]})}function v(e){var s;let{plan:t,services:i,onClose:n,onSuccess:c}=e,[o,d]=(0,a.useState)({servicio_id:(null==t?void 0:t.servicio_id)||"",nombre:(null==t?void 0:t.nombre)||"",duracion_meses:(null==t?void 0:t.duracion_meses)||1,precio:(null==t?void 0:t.precio)||0,slots_disponibles:(null==t?void 0:t.slots_disponibles)||1,activo:null===(s=null==t?void 0:t.activo)||void 0===s||s}),[u,x]=(0,a.useState)(!1),m=async e=>{if(e.preventDefault(),!o.servicio_id||!o.nombre||o.precio<=0){b.Am.error("Por favor completa todos los campos requeridos");return}x(!0);try{let e=t?await h.MP.updatePlan(t.id,o):await h.MP.createPlan(o);e.success?(b.Am.success("Plan ".concat(t?"actualizado":"creado"," correctamente")),c(),n()):b.Am.error(e.message||"Error al ".concat(t?"actualizar":"crear"," plan"))}catch(e){b.Am.error("Error de conexi\xf3n")}finally{x(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,l.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 max-w-lg w-full",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:t?"Editar Plan":"Nuevo Plan"}),(0,l.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Servicio *"}),(0,l.jsxs)("select",{value:o.servicio_id,onChange:e=>d({...o,servicio_id:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Seleccionar servicio"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Duraci\xf3n (meses) *"}),(0,l.jsx)("input",{type:"number",min:"1",max:"12",value:o.duracion_meses,onChange:e=>d({...o,duracion_meses:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nombre del Plan *"}),(0,l.jsx)("input",{type:"text",value:o.nombre,onChange:e=>d({...o,nombre:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500",placeholder:"Ej: Plan Premium",required:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Precio (CLP) *"}),(0,l.jsx)("input",{type:"number",min:"0",step:"100",value:o.precio,onChange:e=>d({...o,precio:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slots Disponibles *"}),(0,l.jsx)("input",{type:"number",min:"1",max:"10",value:o.slots_disponibles,onChange:e=>d({...o,slots_disponibles:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("input",{type:"checkbox",id:"activo",checked:o.activo,onChange:e=>d({...o,activo:e.target.checked}),className:"w-4 h-4 text-blue-600 bg-slate-900 border-slate-600 rounded focus:ring-blue-500"}),(0,l.jsx)("label",{htmlFor:"activo",className:"text-sm font-medium text-slate-300",children:"Plan activo"})]}),(0,l.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",disabled:u,children:"Cancelar"}),(0,l.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors disabled:opacity-50",disabled:u,children:u?"Guardando...":t?"Actualizar":"Crear"})]})]})]})})}},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},95252:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},90740:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},88893:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},99397:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18930:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[399,64,625,980,942,971,117,744],function(){return e(e.s=26504)}),_N_E=e.O()}]);