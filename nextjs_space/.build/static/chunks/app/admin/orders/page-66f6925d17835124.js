(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{89258:function(e,t,s){Promise.resolve().then(s.bind(s,76665))},76665:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(57437),l=s(2265),r=s(60429),n=s(91723),i=s(49322),c=s(41671),o=s(99388),d=s(73247),x=s(90740),u=s(42449),m=s(13041),h=s(95252),p=s(31047),b=s(42208),j=s(20942),f=s(39740),g=s(69064);let N={pendiente:{label:"Pendiente",color:"text-yellow-400",bgColor:"bg-yellow-500/20",icon:n.Z},pagado:{label:"Pagado",color:"text-blue-400",bgColor:"bg-blue-500/20",icon:i.Z},entregado:{label:"Entregado",color:"text-green-400",bgColor:"bg-green-500/20",icon:c.Z},cancelado:{label:"Cancelado",color:"text-red-400",bgColor:"bg-red-500/20",icon:o.Z}};function v(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(!0),[i,c]=(0,l.useState)(""),[o,v]=(0,l.useState)(""),[_,w]=(0,l.useState)(""),[Z,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{P()},[]);let P=async()=>{try{n(!0);let e=await f.MP.getOrders({celular:i,estado:o,fecha:_});e.success?t(e.data):(t([{id:"1",usuario_celular:"+56987654321",usuario_nombre:"Juan P\xe9rez",usuario_email:"juan@email.com",servicio_nombre:"Netflix",plan_nombre:"Plan Premium",plan_duracion_meses:1,total:15990,estado:"entregado",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T14:30:00Z",comprobante_url:"/comprobantes/orden-1.jpg"},{id:"2",usuario_celular:"+56912345678",usuario_nombre:"Mar\xeda Gonz\xe1lez",usuario_email:"maria@email.com",servicio_nombre:"Disney+",plan_nombre:"Plan Familiar",plan_duracion_meses:3,total:35990,estado:"pagado",created_at:"2024-01-14T09:15:00Z",updated_at:"2024-01-14T11:20:00Z",comprobante_url:"/comprobantes/orden-2.jpg"},{id:"3",usuario_celular:"+56945678901",usuario_nombre:"Carlos Silva",usuario_email:"carlos@email.com",servicio_nombre:"HBO Max",plan_nombre:"Plan Est\xe1ndar",plan_duracion_meses:1,total:12990,estado:"pendiente",created_at:"2024-01-13T14:45:00Z",updated_at:"2024-01-13T14:45:00Z"},{id:"4",usuario_celular:"+56923456789",usuario_nombre:"Ana Torres",usuario_email:"ana@email.com",servicio_nombre:"Spotify",plan_nombre:"Plan Individual",plan_duracion_meses:6,total:29990,estado:"cancelado",created_at:"2024-01-12T16:20:00Z",updated_at:"2024-01-12T18:30:00Z"}]),g.Am.error(e.message||"Error al cargar pedidos"))}catch(e){g.Am.error("Error de conexi\xf3n")}finally{n(!1)}},E=async(s,a)=>{try{let l=await f.MP.updateOrderStatus(s,a);l.success?(t(e.map(e=>e.id===s?{...e,estado:a,updated_at:new Date().toISOString()}:e)),g.Am.success("Estado actualizado correctamente")):g.Am.error(l.message||"Error al actualizar estado")}catch(e){g.Am.error("Error de conexi\xf3n")}},A=async t=>{try{let s=await f.MP.getOrder(t);if(s.success)k(s.data);else{let s=e.find(e=>e.id===t);s&&k(s)}S(!0)}catch(e){g.Am.error("Error al cargar detalles del pedido")}},z=e.filter(e=>{let t=e.usuario_celular.includes(i)||(e.usuario_nombre||"").toLowerCase().includes(i.toLowerCase())||e.id.toLowerCase().includes(i.toLowerCase()),s=!o||e.estado===o;return t&&s});return(0,a.jsxs)(j.l,{currentPath:"/admin/orders",children:[(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gesti\xf3n de Pedidos"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Administra y controla el estado de los pedidos de los clientes"})]}),(0,a.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-2xl p-6 border border-slate-700",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por celular, nombre o ID...",value:i,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),(0,a.jsxs)("div",{className:"relative lg:w-48",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,a.jsxs)("select",{value:o,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",children:[(0,a.jsx)("option",{value:"",children:"Todos los estados"}),(0,a.jsx)("option",{value:"pendiente",children:"Pendientes"}),(0,a.jsx)("option",{value:"pagado",children:"Pagados"}),(0,a.jsx)("option",{value:"entregado",children:"Entregados"}),(0,a.jsx)("option",{value:"cancelado",children:"Cancelados"})]})]}),(0,a.jsx)("button",{onClick:P,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 lg:w-auto w-full",children:"Actualizar"})]})}),(0,a.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-2xl border border-slate-700 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-slate-700/50 border-b border-slate-600",children:[(0,a.jsx)("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Pedido"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Cliente"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 text-slate-300 font-medium",children:"Servicio"}),(0,a.jsx)("th",{className:"text-right py-4 px-6 text-slate-300 font-medium",children:"Total"}),(0,a.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Estado"}),(0,a.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Fecha"}),(0,a.jsx)("th",{className:"text-center py-4 px-6 text-slate-300 font-medium",children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:z.map((e,t)=>{let s=N[e.estado],l=s.icon;return(0,a.jsxs)(r.E.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"border-b border-slate-700 hover:bg-slate-700/30 transition-colors",children:[(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-lg",children:(0,a.jsx)(u.Z,{className:"w-5 h-5 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-white font-medium",children:["#",e.id]}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm",children:[e.plan_duracion_meses," ",1===e.plan_duracion_meses?"mes":"meses"]})]})]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.usuario_celular})]}),e.usuario_nombre&&(0,a.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:e.usuario_nombre})]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white font-medium",children:e.servicio_nombre}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:e.plan_nombre})]})}),(0,a.jsx)("td",{className:"py-4 px-6 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-1 text-green-400 font-medium",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.total.toLocaleString("es-CL")})]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full ".concat(s.bgColor),children:[(0,a.jsx)(l,{className:"w-4 h-4 ".concat(s.color)}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(s.color),children:s.label})]})})}),(0,a.jsx)("td",{className:"py-4 px-6 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1 text-slate-300",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:new Date(e.created_at).toLocaleDateString("es-ES")})]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>A(e.id),className:"p-2 text-slate-400 hover:text-blue-400 transition-colors",title:"Ver detalles",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("select",{value:e.estado,onChange:t=>E(e.id,t.target.value),className:"bg-slate-700 text-white text-xs px-2 py-1 rounded border border-slate-600 focus:outline-none focus:border-blue-500",children:[(0,a.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,a.jsx)("option",{value:"pagado",children:"Pagado"}),(0,a.jsx)("option",{value:"entregado",children:"Entregado"}),(0,a.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]})})]},e.id)})})]})})}),0===z.length&&!s&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.Z,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:i||o?"No se encontraron pedidos":"No hay pedidos registrados"}),(0,a.jsx)("p",{className:"text-slate-500",children:i||o?"Intenta con otros filtros de b\xfasqueda":"Los pedidos de los clientes aparecer\xe1n aqu\xed"})]}),s&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Cargando pedidos..."})]})]}),C&&Z&&(0,a.jsx)(y,{order:Z,onClose:()=>{S(!1),k(null)},onStatusUpdate:(e,t)=>{E(e,t),k({...Z,estado:t})}})]})}function y(e){let{order:t,onClose:s,onStatusUpdate:n}=e,[i,c]=(0,l.useState)(t.estado),d=N[t.estado],x=d.icon;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-xl",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["Pedido #",t.id]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1 px-3 py-1 rounded-full ".concat(d.bgColor," inline-flex"),children:[(0,a.jsx)(x,{className:"w-4 h-4 ".concat(d.color)}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(d.color),children:d.label})]})]})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(o.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Informaci\xf3n del Cliente"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Tel\xe9fono"}),(0,a.jsx)("p",{className:"text-white",children:t.usuario_celular})]}),t.usuario_nombre&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Nombre"}),(0,a.jsx)("p",{className:"text-white",children:t.usuario_nombre})]}),t.usuario_email&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Email"}),(0,a.jsx)("p",{className:"text-white",children:t.usuario_email})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Detalles del Servicio"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Servicio"}),(0,a.jsx)("p",{className:"text-white",children:t.servicio_nombre})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Plan"}),(0,a.jsx)("p",{className:"text-white",children:t.plan_nombre})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Duraci\xf3n"}),(0,a.jsxs)("p",{className:"text-white",children:[t.plan_duracion_meses," ",1===t.plan_duracion_meses?"mes":"meses"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Total"}),(0,a.jsxs)("p",{className:"text-green-400 font-medium",children:["$",t.total.toLocaleString("es-CL")]})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Fechas"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Fecha de Pedido"}),(0,a.jsx)("p",{className:"text-white",children:new Date(t.created_at).toLocaleString("es-ES")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"\xdaltima Actualizaci\xf3n"}),(0,a.jsx)("p",{className:"text-white",children:new Date(t.updated_at).toLocaleString("es-ES")})]})]})]}),t.comprobante_url&&(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Comprobante de Pago"}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-slate-400 mb-2",children:"Archivo adjunto"}),(0,a.jsx)("a",{href:t.comprobante_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"Ver comprobante"})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Actualizar Estado"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,a.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,a.jsx)("option",{value:"pagado",children:"Pagado"}),(0,a.jsx)("option",{value:"entregado",children:"Entregado"}),(0,a.jsx)("option",{value:"cancelado",children:"Cancelado"})]}),i!==t.estado&&(0,a.jsx)("button",{onClick:()=>{i!==t.estado&&n(t.id,i)},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors",children:"Actualizar"})]})]})]})]})})}},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},49322:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},42208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},13041:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},73247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[399,64,625,980,942,971,117,744],function(){return e(e.s=89258)}),_N_E=e.O()}]);