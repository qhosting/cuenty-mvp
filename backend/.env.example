# ============================================
# CONFIGURACIÓN DE BASE DE DATOS
# ============================================

# OPCIÓN 1: DATABASE_URL (Recomendado para contenedores y despliegues)
# Esta es la forma preferida de configurar la conexión a la base de datos.
# Formato: postgresql://usuario:contraseña@host:puerto/nombre_db?parametros
# Ejemplo para conexión entre contenedores Docker:
DATABASE_URL=postgresql://postgres:51056d26ddf0ddbbc77a@cloudmx_cuenty-db:5432/cuenty-db?sslmode=disable

# OPCIÓN 2: Variables individuales (Fallback)
# Si DATABASE_URL no está definida, se usarán estas variables individuales.
# Útil para desarrollo local o entornos que no soporten DATABASE_URL.

# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=cuenty_db
# DB_USER=postgres
# DB_PASSWORD=postgres

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 
# 1. Prioridad: Si DATABASE_URL está definida, las variables individuales 
#    (DB_HOST, DB_PORT, etc.) serán ignoradas.
#
# 2. Conexión entre contenedores Docker: Usar el nombre del contenedor 
#    como host (ej: cloudmx_cuenty-db) en lugar de localhost.
#
# 3. SSL Mode: Agregar ?sslmode=disable a la URL si la base de datos 
#    no requiere SSL (común en entornos de desarrollo y Docker).
#
# 4. Seguridad: NUNCA commitear el archivo .env con credenciales reales.
#    Este archivo (.env.example) es solo una plantilla.
#
# ============================================
# OTRAS VARIABLES DE ENTORNO
# ============================================

# Puerto del servidor backend
PORT=3001

# Entorno de ejecución (development, production, test)
NODE_ENV=development

# JWT Secret para autenticación (cambiar en producción)
JWT_SECRET=tu_secreto_super_seguro_aqui

# Configuración de CORS (separar múltiples orígenes con comas)
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# ============================================
# INTEGRACIÓN CON CHATWOOT
# ============================================

# URL base de tu instancia de Chatwoot
CHATWOOT_URL=https://chat.whatscloud.site

# Token de acceso de la API de Chatwoot
# Obtenerlo en: Configuración de perfil > Tokens de acceso
CHATWOOT_API_TOKEN=tu_token_de_chatwoot_aqui

# ID de la cuenta en Chatwoot
CHATWOOT_ACCOUNT_ID=3

# ID del inbox de WhatsApp en Chatwoot
CHATWOOT_INBOX_ID=1

# ============================================
# AUTOMATIZACIÓN - ENRUTAMIENTO DE CONVERSACIONES
# ============================================

# Email para notificaciones del sistema (quien reciba alertas)
SYSTEM_NOTIFICATION_EMAIL=sistema@tudominio.com

# ============================================
# AUTOMATIZACIÓN - FEATURE FLAGS
# ============================================

# Habilitar/deshabilitar asignación automática de cuentas
ENABLE_AUTO_ASSIGNMENT=true

# Habilitar/deshabilitar procesamiento automático de renovaciones
ENABLE_AUTO_RENEWALS=true

# Habilitar/deshabilitar notificaciones automáticas
ENABLE_AUTO_NOTIFICATIONS=true

# Habilitar/deshabilitar servicio de email automático
ENABLE_EMAIL_SERVICE=true

# Habilitar/deshabilitar limpieza automática de logs
ENABLE_AUTO_CLEANUP=true

# Habilitar/deshabilitar logs detallados de automatización
ENABLE_AUTOMATION_DEBUG_LOGS=false

# ============================================
# AUTOMATIZACIÓN - CONFIGURACIÓN DE EMAIL
# ============================================

# API Key de SendGrid (obtener en: https://app.sendgrid.com/settings/api_keys)
SENDGRID_API_KEY=tu_api_key_de_sendgrid

# Email remitente para correos automáticos
SENDER_EMAIL=noreply@tudominio.com

# Nombre del remitente
SENDER_NAME=CUENTY Sistema

# Email para recibir logs y alertas del sistema
ADMIN_EMAIL=admin@tudominio.com

# ============================================
# AUTOMATIZACIÓN - CONFIGURACIÓN DE SEGURIDAD
# ============================================

# Clave para encriptar credenciales (debe ser exactamente 32 caracteres)
ENCRYPTION_KEY=tu_clave_secreta_de_32_caracteres

# Algoritmo de encriptación
ENCRYPTION_ALGORITHM=aes-256-cbc

# ============================================
# AUTOMATIZACIÓN - CONFIGURACIÓN DE CRON JOBS
# ============================================

# Horario de verificación diaria de renovaciones (formato: hora:minuto)
DAILY_RENEWAL_CHECK_TIME=09:00

# Horario de limpieza de logs antiguos (formato: hora:minuto)  
DAILY_LOG_CLEANUP_TIME=02:00

# Días antes del vencimiento para enviar recordatorios
RENEWAL_REMINDER_DAYS=7,3,1

# ============================================
# AUTOMATIZACIÓN - LÍMITES Y CONFIGURACIÓN
# ============================================

# Número máximo de cuentas a procesar por lote
BULK_PROCESSING_LIMIT=10

# Tiempo de espera entre intentos de asignación (en segundos)
ASSIGNMENT_RETRY_DELAY=30

# Días después de los cuales se considera una cuenta inactiva para ser reutilizada
INACTIVE_ACCOUNT_DAYS=30

# ============================================
# NOTAS SOBRE CHATWOOT
# ============================================
#
# 1. Token de API: Obtener desde el perfil del usuario en Chatwoot
#    Panel > Configuración de perfil > Tokens de acceso
#
# 2. Account ID: Verificar en la URL de tu cuenta de Chatwoot
#    Ejemplo: https://chat.whatscloud.site/app/accounts/3
#
# 3. Configurar webhook en Chatwoot:
#    - Ir a: Configuración > Webhooks
#    - URL: https://tu-dominio.com/api/chatwoot/webhook
#    - Eventos: message_created, conversation_created
#
# 4. Documentación completa en:
#    /home/ubuntu/chatwoot_integration_guide.md
#
# ============================================
